<!DOCTYPE html>
<html>
<head>
  <title>Phone Number Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      background-color: #f4f4f4;
    }
    .container {
      margin-top: 20px;
    }
    .title-icon {
      margin-right: 10px;
    }
    #phoneNumbersList {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      grid-gap: 10px;
    }
    .is-invalid {
      border-color: red;
    }
    .footer {
      text-align: center;
      margin-top: 20px;
      padding: 10px 0;
      background-color: #f8f9fa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="d-flex align-items-center">
      <span class="title-icon"><i class="fas fa-phone"></i></span>
      Phone Number Generator
    </h1>
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <div class="card">
          <div class="card-body">
            <label for="prefixes" class="form-label">Enter Prefixes (comma-separated):</label>
            <input type="text" class="form-control" id="prefixes" placeholder="e.g. 213555, 310888, 818123">
            <p id="prefixesHelp" class="form-text text-muted mb-0">Enter comma-separated 6-digit prefixes.</p>
            <button class="btn btn-primary mt-3" id="generateButton">Generate</button>
            <button class="btn btn-success mt-3" id="downloadButton" disabled>Download</button>
            <div class="mt-3" id="phoneNumbersList"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    Made with &#10084;&#65039; by <a href="https://github.com/thejordanprice" target="_blank" rel="noopener noreferrer">thejordanprice</a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    async function generatePhoneNumbers(prefixes) {
      return new Promise(resolve => {
        const phoneNumbers = [];
        prefixes.forEach(async prefix => {
          for (let i = 0; i < 10000; i++) {
            const suffix = i.toString().padStart(4, '0');
            const phoneNumber = `${prefix}${suffix}`;
            phoneNumbers.push(phoneNumber);
          }
        });
        resolve(phoneNumbers);
      });
    }
    function downloadPhoneNumbers(phoneNumbers) {
      const blob = new Blob([phoneNumbers.join('\n')], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'phone_numbers.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
    function validateInput(input) {
      const regex = /^(\d{6},\s*)*\d{6}$/;
      return regex.test(input);
    }
    async function main() {
      const generateButton = document.getElementById('generateButton');
      const downloadButton = document.getElementById('downloadButton');
      const prefixesInput = document.getElementById('prefixes');
      const prefixesHelp = document.getElementById('prefixesHelp');
      const phoneNumbersList = document.getElementById('phoneNumbersList');
      generateButton.addEventListener('click', async () => {
        const prefixes = prefixesInput.value.split(',').map(prefix => prefix.trim());
        if (!validateInput(prefixesInput.value)) {
          prefixesHelp.textContent = 'Enter comma-separated 6-digit prefixes. Invalid input.';
          prefixesHelp.style.color = 'red';
          prefixesInput.classList.add('is-invalid');
          return;
        } else {
          prefixesHelp.textContent = 'Enter comma-separated 6-digit prefixes.';
          prefixesHelp.style.color = 'black';
          prefixesInput.classList.remove('is-invalid');
        }
        const phoneNumbers = await generatePhoneNumbers(prefixes);
        phoneNumbersList.innerHTML = '';
        phoneNumbers.forEach(phoneNumber => {
          const phoneNumberDiv = document.createElement('div');
          phoneNumberDiv.className = 'bg-light p-2';
          phoneNumberDiv.textContent = phoneNumber;
          phoneNumbersList.appendChild(phoneNumberDiv);
        });
        downloadButton.disabled = false;
      });
      downloadButton.addEventListener('click', () => {
        const phoneNumbers = Array.from(phoneNumbersList.getElementsByTagName('div')).map(div => div.textContent);
        downloadPhoneNumbers(phoneNumbers);
      });
    }
    main();
  </script>
</body>
</html>
